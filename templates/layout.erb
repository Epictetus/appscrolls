# >---------------------------------------------------------------------------<
# 
#                   ___               ____             ____  
#                  / _ | ___  ___    / __/__________  / / /__
#                 / __ |/ _ \/ _ \  _\ \/ __/ __/ _ \/ / (_-<
#                /_/ |_/ .__/ .__/ /___/\__/_/  \___/_/_/___/
#                     /_/  /_/                               
#
#   This template was generated by App Scrolls, the amazing and awesome Rails
#     application template builder. Get started at http://appscrolls.org
#
# >---------------------------------------------------------------------------<

# >----------------------------[ Initial Setup ]------------------------------<

initializer 'generators.rb', <<-RUBY
Rails.application.config.generators do |g|
end
RUBY

@scrolls = <%= resolve_scrolls.map(&:key).inspect %> 

<%= render "helpers" %>

<% resolve_scrolls.each do |scroll| %>
<%= render 'scroll', scroll.get_binding %>
<% end %>

<% if custom_code? %># >-----------------------------[ Custom Code ]-------------------------------<

<%= custom_code %><% end %>

@current_scroll = nil

# >-----------------------------[ Run Bundler ]-------------------------------<

say_wizard "Running Bundler install. This will take a while."
run 'bundle install'
say_wizard "Running after Bundler callbacks."
@after_blocks.each{|b| config = @configs[b[0]] || {}; @current_scroll = b[0]; b[1].call}

@current_scroll = nil
say_wizard "Running after everything callbacks."
@after_everything_blocks.each{|b| config = @configs[b[0]] || {}; @current_scroll = b[0]; b[1].call}
